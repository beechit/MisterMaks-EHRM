{namespace ehrm=Beech\Ehrm\ViewHelpers}
<ehrm:flashMessages/>
<f:form.validationResults for="document">
	<f:if condition="{validationResults.flattenedErrors}">
		<div class="error">
			<f:for each="{validationResults.flattenedErrors}" key="propertyPath" as="errors">{propertyPath}:
				<f:for each="{errors}" as="error">
					<div class="alert alert-warning">{error}</div>
				</f:for>
			</f:for>
		</div>
	</f:if>
</f:form.validationResults>
<f:form method="post" action="create" name="absence" object="{sickness}" class="compact-form form-horizontal" enctype="multipart/form-data">
	<div class="row-fluid">
		<div class="span6">
			<div class="control-group">
				<label class="control-label" for="startDate">
					<f:translate id="absence.leave.startDate">Start date:</f:translate>
				</label>
				<ehrm:form.datePicker id="leave.startDate" property="startDate" class="datepicker span8" enableTimePicker="TRUE"/>
			</div>
			<div class="control-group">
				<label class="control-label" for="endDate">
					<f:translate id="absence.leave.endDate">End date:</f:translate>
				</label>
				<ehrm:form.datePicker id="leave.endDate" property="endDate" class="datepicker span8" enableTimePicker="TRUE"/>
			</div>
			<div class="control-group">
				<label class="control-label" for="absenceType">Type</label>
				<f:form.select property="absenceType" class="absenceType" options="{absenceTypes}" value="leave"/>
			</div>

			<div class="control-group hide control-documentSubmit" >
				<label class="control-label" for="submit">&nbsp;</label>
				<f:form.submit value="{f:translate(id:'action.save')}" class="btn btn-primary"/>
			</div>
		</div>
		<div class="span6">
			<label for="reason">Reason</label>
			<div class="control-group">
				<f:form.textarea id="reason" property="reason" class="span12" rows="10">Reason</f:form.textarea>
			</div>
		</div>

	</div>
	<div class="row-fluid">
		<div class="span4 offset8">

			<div class="control-group">
				<label for="reportMethod">Report method</label>
				<ehrm:optionSelect property="reportMethod" id="reportMethod" model="Beech.Absence:Absence" placeholder="{f:translate(value: 'reportMethod')}" class="reportMethod"/>
			</div>
			<div class="control-group">
				<label for="reportedTo">Reported to</label>
				<f:form.select property="reportedTo" id="reportedTo" options="{persons}" optionLabelField="name"/>
			</div>
		</div>
	</div>

	<f:form.hidden property="person" value="{person}"/>
	<button type="submit" name="action" class="btn btn-small" value="{action}">
		<i class="icon-save"></i>
	</button>
</f:form>
