{namespace ehrm=Beech\Ehrm\ViewHelpers}
<div class="modal-header custom">
	<h3><f:render partial="Beech.Party:Views/Show/ProfilePhoto" arguments="{photo: person.profilePhoto, width: 50}"/>{person.name} / Sick report</h3>
</div>
<div class="clearfix well">
	<div id="absence-add" class="clearfix">
		<ehrm:flashMessages/>
		<f:form.validationResults for="absence">
			<f:if condition="{validationResults.flattenedErrors}">
				<div class="error">
					<f:for each="{validationResults.flattenedErrors}" key="propertyPath" as="errors">{propertyPath}:
						<f:for each="{errors}" as="error">
							<div class="alert alert-warning">{error}</div>
						</f:for>
					</f:for>
				</div>
			</f:if>
		</f:form.validationResults>
		<f:form method="post" action="create" name="absence" object="{absence}" class="compact-form form-horizontal" enctype="multipart/form-data">
			<input type="hidden" name="iscomplete" value="true" data-validate="isComplete"/>
			<div class="row-fluid">
				<div class="span6">
					<div class="control-group">
						<label class="control-label" for="startDate">
							<f:translate id="sickness.startDate">Date:</f:translate>
						</label>
						<ehrm:form.datePicker id="sickness.startDate" property="startDate" class="datepicker span8" />
					</div>

					<div class="control-group">
						<label class="control-label" for="absenceType">Sickness type</label>
						<f:form.select property="absenceArrangement" class="absenceArrangement" options="{absenceArrangements}" optionLabelField="label" />
					</div>
					<div class="control-group">
						<label class="control-label" for="estimatedRecoveryDate">
							<f:translate id="sickness.estimatedRecoveryDate">Probably recovery on:</f:translate>
						</label>
						<ehrm:form.datePicker id="estimatedRecoveryDate" property="estimatedRecoveryDate" class="datepicker span8" />
						<f:form.checkbox name="recoveryDateUnknown" id="recoveryDateUnknown" value="TRUE"/><f:translate id="unknown">Unknown</f:translate>
					</div>

					<div class="control-group hide control-documentSubmit" >
						<label class="control-label" for="submit">&nbsp;</label>
						<f:form.submit value="{f:translate(id:'action.save')}" class="btn btn-primary"/>
					</div>
				</div>
				<div class="span6">
					<label for="reason">Reason</label>
					<div class="control-group">
						<f:form.textarea id="reason" property="reason" class="span12" rows="10">Reason</f:form.textarea>
					</div>
				</div>

			</div>
			<div class="row-fluid">
				<div class="span4 offset8">

					<div class="control-group">
						<label for="reportMethod">Report method</label>
						<ehrm:optionSelect property="reportMethod" id="reportMethod" model="Beech.Absence:Absence" placeholder="{f:translate(value: 'reportMethod')}" class="reportMethod"/>
					</div>
					<div class="control-group">
						<label for="reportedTo">Reported to</label>
						<f:form.select property="reportedTo" id="reportedTo" options="{persons}" optionLabelField="name"/>
					</div>
				</div>
			</div>

			<f:form.hidden property="absenceType" value="{absenceType}"/>
			<f:form.hidden property="person" value="{person}"/>
			<button type="submit" name="action" class="btn btn-small" value="{action}">
				<i class="icon-save"></i>
			</button>
		</f:form>
	</div>
</div>

