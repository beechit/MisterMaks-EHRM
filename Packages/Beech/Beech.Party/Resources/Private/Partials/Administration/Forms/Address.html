{namespace ehrm=Beech\Ehrm\ViewHelpers}
<f:render partial="FlashMessages" arguments="{modelName: 'address'}"/>
<div id="{action}{address.id}{suffix}">
	<ehrm:form action="{action}" controller="{controller}" object="{address}" name="address" class="compact-form form-horizontal {action}">
		<f:if condition="{0: action} != {0: 'remove'}">
			<f:if condition="{0: action} == {0: 'update'}"><f:then>
				<div class="row-fluid">
					<div class="span1"><i class="icon-home"></i></div>
					<div class="span3"><strong>{address.type} {address.streetName} {address.houseNumber} {address.houseNumberAddition}</strong></div>
				</div>
				<div class="row-fluid">
					<div class="span4">{address.postalNL} {address.residence}</div>
				</div>
				<div class="row-fluid">
					<div class="span4">{address.country}</div>
					<div class="span2 offset2">
						<div class="btn-group">
							<a class="btn btn-small" data-toggle="collapse" data-target="#toggle{address.id}"><i class="icon-pencil"></i></a>
							<f:if condition="{0: action} != {0: 'add'}">
								<f:then>
									<button type="submit" name="action" class="btn btn-danger btn-small" value="remove">
										<i class="icon-trash"></i>
									</button>
								</f:then>
							</f:if>
						</div>
					</div>
				</div>
				<div id="toggle{address.id}" class="collapse">
			</div>
			</f:then><f:else>
				<div>
			</f:else></f:if>

			<div class="row-fluid" >
				<div class="span1"><i class="icon-plus"/></div>
				<div class="span3">
					<ehrm:optionSelect property="addressType" id="addressType{address.id}" model="Beech.Party:Address" placeholder="Type..." class="span10"/>
				</div>
				<div class="span6">
					<div class="row-fluid">
						<f:form.textfield property="streetName" class="span8" placeholder="Street name..."/>
						<f:form.textfield property="houseNumber" class="span2" placeholder="..."/>
						<f:form.textfield property="houseNumberAddition" class="span2" placeholder="..."/>
					</div>
						<div class="row-fluid">
							<f:form.textfield property="postalNL" class="span3" placeholder="Zip..."/>
							<f:form.textfield property="residence" class="span8" placeholder="Residence..."/>
							<div class="input-append input-prepend">
								<span class="add-on"><i class="icon-home"/></span>
								<span class="add-on">Primary <f:form.checkbox property="primary" id="primary-address" value="TRUE"/></span>
							</div>
						</div>
						<div class="row-fluid">
							<ehrm:form.countrySelect property="country" id="country" class="countrySelect span10" placeholder="{f:translate(id:'Choose country')}"/>
					</div>
				</div>
				<div class="span2">
					<button type="submit" name="action" class="btn btn-small" value="{action}">
						<i class="icon-save"></i>
					</button>
				</div>
			</div>
</div>
</f:if>

<f:if condition="{0: action} == {0: 'remove'}">
	<button type="submit" name="submit" class="btn btn-danger btn-mini">
		<i class="icon-trash"></i>
	</button>
</f:if>
<f:form.hidden property="id"/>
<f:form.hidden property="party" value="{party}"/>
</ehrm:form>
</div>