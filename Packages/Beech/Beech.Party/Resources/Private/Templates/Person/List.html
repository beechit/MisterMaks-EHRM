<f:layout name="Ajax" />{namespace ehrm=Beech\Ehrm\ViewHelpers}

<f:section name="Body">
	<ehrm:flashMessages/>
	<div>
		<p><a href="/#/person/new" target="_top" title="{f:translate(id: 'newEmployee')}">
			<i class="btn btn-success btn-gspm-4 pull-right"><i class="icon-user"></i><f:translate id="new">New</f:translate></i>
		</a></p>
	</div>
	<f:if condition="{persons}">
		<f:then>

			<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="personsList">
				<thead>
				<tr>
					<th></th>
					<th><f:translate id="name">Name</f:translate></th>
					<th><f:translate id="age">Age</f:translate></th>
					<th><f:translate id="department">Department</f:translate></th>
					<th><f:translate id="jobDescription">Jobdescription</f:translate></th>
					<th><f:translate id="action">Action</f:translate></th>
				</tr>
				</thead>
				<tbody>
					<f:for each="{persons}" as="person" iteration="iterator">
						<tr>
							<td><f:render partial="Views/Show/ProfilePhoto" arguments="{photo: person.profilePhoto, width: 50, random: 'TRUE'}"/></td>
							<td>{person.name.fullName}</td>
							<td>{person.age}</td>
							<td>{person.department.Name}</td>
							<td></td>
							<td>
								<a href="#/person/show/{person.id}"><i class="icon-eye-open"></i></a>
								<a href="#/person/edit/{person.id}"><i class="icon-pencil"></i></a>
								<a href="#/person/delete/{person.id}"><i class="icon-trash"></i></a>
							</td>
						</tr>
					</f:for>
				</tbody>
			</table>
			<script type="text/javascript">
				var oPersonsListTable = $('#personsList')
					.dataTable({
						"oLanguage": {
						"sEmptyTable": '<f:translate id="person.sEmptyTable">No data available in table</f:translate>',
						"sSearch": '<f:translate id="person.sSearch">Search</f:translate>',
						"sInfo": '<f:translate id="person.sInfo">Showing (_START_ of _END_) of _TOTAL_ persons.</f:translate>',
						"sLengthMenu": '<f:translate id="person.sLengthMenu">Show _MENU_ entries</f:translate>',
							"oPaginate": {
							"sFirst": '<f:translate id="person.sFirst">Search</f:translate>',
							"sLast": '<f:translate id="person.sLast">Last</f:translate>',
							"sNext": '<f:translate id="person.sNext">Next</f:translate>',
							"sPrevious": '<f:translate id="person.sPrevious">Previous</f:translate>'
						}
					}
				})
			</script>
		</f:then>
		<f:else>
			<p></p>
		</f:else>
	</f:if>
</f:section>