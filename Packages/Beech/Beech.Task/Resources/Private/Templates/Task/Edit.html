<f:layout name="Ajax"/>{namespace ehrm=Beech\Ehrm\ViewHelpers}
<f:section name="Body">

	<h1>
		<f:translate id="task">Task</f:translate>
	</h1>

	<ehrm:flashMessages/>
	<f:form.validationResults for="task">
		<f:if condition="{validationResults.flattenedErrors}">
			<div class="error">
				<f:for each="{validationResults.flattenedErrors}" key="propertyPath" as="errors">{propertyPath}:
					<f:for each="{errors}" as="error">{error}</f:for>
				</f:for>
			</div>
		</f:if>
	</f:form.validationResults>
	<f:form action="update" object="{task}" name="task" class="form-horizontal well">
		<f:form.hidden property="id" />

		<div class="control-group">
			<label class="control-label" for="assigned_to">
				<f:translate id="task.assignedTo">Assigned to</f:translate>
			</label>

			<div class="controls">
				<f:form.select property="assignedTo" id="assigned_to" options="{persons}" optionLabelField="name" />
			</div>
		</div>
		<div class="control-group">
			<label class="control-label" for="description">
				<f:translate id="task.description">Description</f:translate>
			</label>

			<div class="controls">
				<f:form.textarea property="description" id="description"/>
			</div>
		</div>

		<div class="control-group">
			<label class="control-label" for="priority">
				<f:translate id="task.priority">Priority</f:translate>
			</label>

			<div class="controls">
				<f:form.select property="priority" id="priority" options="{priorities}" optionValueField="id" optionLabelField="label" />
			</div>
		</div>

		<div class="control-group">
			<a class="btn btn-danger" href="/#/tasks"><f:translate id="action.cancel">Cancel</f:translate></a>
			<f:form.submit value="<f:translate id='action.save'>Save</f:translate>" class="btn btn-primary"/>
		</div>

	</f:form>
</f:section>