{namespace ehrm=Beech\Ehrm\ViewHelpers}
<f:comment>
	This can be totally removed... credits to Ember.
</f:comment>
<f:section name="Body">
	<ember:handlebars paths="{0: 'resource://Beech.Ehrm/Private/HandlebarTempaltes'}" />
	<div class="row-fluid">
		<div class="span2">
			<div class="well">
				<h4>Things to do</h4>
				<f:if condition="{groupedTodos}">
					<f:then>
						<div class="accordion" id="todo-list-widget">
							<f:for each="{groupedTodos}" as="group" key="priority">
								<div class="accordion-group">
									<div class="accordion-heading">
										<a class="accordion-toggle" data-toggle="collapse" data-parent="#todo-list-widget" href="#todo-list-widget-{priority}">
											<span class="badge badge-{group.class}">{group.todos -> f:count()}</span> {group.label}
										</a>
									</div>
									<div id="todo-list-widget-{priority}" class="accordion-body collapse">
										<div class="accordion-inner">
											<f:for each="{group.todos}" as="todo">
												<div>
													{todo.task}<br/>
													<button class="btn btn-mini">
														<ehrm:link.action action="{todo.action}" controller="{todo.controller}" arguments="{todo.arguments}" package="beech.party">
															<f:translate id="do.task">Do task</f:translate>
														</ehrm:link.action>
													</button>
												</div>
											</f:for>
										</div>
									</div>
								</div>
							</f:for>
						</div>
					</f:then>
					<f:else>
						<f:translate id="no.active.tasks">No active tasks</f:translate>
					</f:else>
				</f:if>
			</div>
		</div>
		<div class="span5">
			<div class="well">
				<h4>Person workflows</h4>
			</div>
			<div class="well">
				<h4>Administration</h4>
			</div>
		</div>
		<div class="span5">
			<div class="well">
				<h4>Organisation workflows</h4>
			</div>

			<div class="well">
				<h4>Help</h4>
			</div>
		</div>
	</div>
</f:section>
