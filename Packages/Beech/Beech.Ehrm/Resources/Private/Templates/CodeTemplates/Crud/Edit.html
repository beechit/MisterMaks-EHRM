<![CDATA[<f:layout/>{namespace ehrm=Beech\Ehrm\ViewHelpers}

<f:section name="Body">
	<f:form.validationResults for="]]>{entity}<![CDATA[">
		<f:if condition="{validationResults.flattenedErrors}">
			<div class="error">
				<f:for each="{validationResults.flattenedErrors}" key="propertyPath" as="errors">{propertyPath}:
					<f:for each="{errors}" as="error">{error}</f:for>
				</f:for>
			</div>
		</f:if>
	</f:form.validationResults>

	<f:form action="update" object="{]]>{entity}<![CDATA[}]]>" name="{entity}" class="form-horizontal well">
		<f:for each="{properties}" as="property" key="propertyName">
			<div class="control-group">
			<f:if condition="{0: property.fieldType} == {0: 'textfield'}"><f:then>
				<label class="control-label" for="{propertyName}">{property.label}</label>
				<div class="controls">
					<![CDATA[<f:form.textfield property="]]>{property.id}<![CDATA[" id="]]>{property.id}<![CDATA[" />]]>
				</div>
			</f:then></f:if>
			<f:if condition="{0: property.fieldType} == {0: 'select'}"><f:then>
				<label class="control-label" for="{propertyName}">{property.label}</label>
					<div class="controls"><![CDATA[<f:form.select]]> property="{property.id}" id="{property.id}" options="{property.options.values}"/></div>
			</f:then></f:if>
			<f:if condition="{0: property.fieldType} == {0: 'fieldset'}">
				<f:then>
					<fieldset>
						<legend>{property.label}</legend>
						<f:for each="{property.items}" as="item" key="itemName">
							<f:if condition="{0: item.fieldType} == {0: 'textfield'}">
								<f:then><label class="control-label" for="{itemName}">{item.label}</label>
									<div class="controls">
										<![CDATA[<f:form.textfield property="]]>{item.id}<![CDATA[" id="]]>{item.id}<![CDATA[" />]]>
									</div>
								</f:then>
							</f:if>
							<f:if condition="{0: item.fieldType} == {0: 'select'}">{item.options.values}
								<f:then><label class="control-label" for="{itemName}">{item.label}</label>
									<div class="controls">
										<![CDATA[<f:form.select]]> property="{item.id}" id="{item.id}" options="{item.options.values}"/>
									</div>
								</f:then>
							</f:if>
						</f:for>
					</fieldset>
				</f:then>
			</f:if>
			</div>
		</f:for>
		<div class="control-group">
			<![CDATA[
			<f:form.submit value="Update" class="btn btn-primary"/>
		</div>
	</f:form>
	]]>
	<![CDATA[
</f:section>]]>